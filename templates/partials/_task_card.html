<div class="bg-white rounded-lg shadow p-4 mb-4" 
     draggable="true"
     data-task-id="{{ task.id }}"
     hx-trigger="dragend"
     hx-post="{% url 'task-update-position' task.id %}"
     hx-swap="none">
    <div class="flex justify-between items-start">
        <h3 class="text-lg font-medium text-gray-900">{{ task.title }}</h3>
        <div class="flex space-x-2">
            {% if task.priority == 'high' %}
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">High</span>
            {% elif task.priority == 'medium' %}
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">Medium</span>
            {% else %}
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Low</span>
            {% endif %}
            
            {% if task.status == 'completed' %}
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Completed</span>
            {% elif task.status == 'in_progress' %}
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">In Progress</span>
            {% else %}
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">Todo</span>
            {% endif %}
        </div>
    </div>

    {% if task.description %}
        <p class="mt-2 text-sm text-gray-600">{{ task.description|truncatewords:30 }}</p>
    {% endif %}

    <div class="mt-4 flex items-center justify-between">
        <div class="flex items-center space-x-2">
            {% if task.assigned_to %}
                <img class="h-6 w-6 rounded-full" src="{% firstof task.assigned_to.avatar_url 'https://ui-avatars.com/api/?name='|add:task.assigned_to.get_full_name|urlencode %}" alt="">
                <span class="text-sm text-gray-500">{{ task.assigned_to.get_full_name }}</span>
            {% endif %}
        </div>
        
        {% if task.due_date %}
            <span class="text-sm text-gray-500">Due: {{ task.due_date|date:"M d, Y" }}</span>
        {% endif %}
    </div>

    <div class="mt-4 flex justify-end space-x-2">
        <button hx-get="{% url 'task-detail' task.id %}"
                hx-target="#modal-container"
                class="text-sm text-indigo-600 hover:text-indigo-900">
            View Details
        </button>
        <button hx-get="{% url 'task-edit' task.id %}"
                hx-target="#modal-container"
                class="text-sm text-gray-600 hover:text-gray-900">
            Edit
        </button>
    </div>
</div>